const timer=document.getElementById("timer");const start=document.getElementById("start");const reset=document.getElementById("reset");const result=document.getElementById("result");const typedField=document.getElementById("typed");const untypedField=document.getElementById("untyped");const time=30000;let missTypecount=0;let successTypecount=0;const strs=["BarringtonLevy","FreddyMcgregor","GregoryIsaacs","DaddyFreddy","SuperCat","EekAMouse","Tiger","Sanchez","FrankiePaul",];function randomInt(max){return Math.floor(Math.random()*Math.floor(max));} function nextStr(){const idx=randomInt(strs.length);return strs[idx];} function textUpload(){typedField.textContent=typed;untypedField.textContent=untyped;} function next(){typed="";untyped=nextStr();textUpload();} function updateTime(){const ms=remaining%1000;const s=Math.floor(remaining/1000)%60;const m=Math.floor(remaining/(1000*60))%60;const h=Math.floor(remaining/(1000*60*60));const msStr=ms.toString().padStart(3,"0");const sStr=s.toString().padStart(2,"0");const mStr=m.toString().padStart(2,"0");const hStr=h.toString().padStart(2,"0");timer.innerHTML=`${hStr}:${mStr}.${sStr}.${msStr}`;} function keydownCallback(e){if(e.key!==untyped.substring(0,1)){missTypecount+=1;return;} successTypecount+=1;typed+=untyped.substring(0,1);untyped=untyped.substring(1);textUpload();if(untyped===""){next();}} function gameStart(){let pre=new Date();timeoutId=setInterval(()=>{const now=new Date();remaining-=now-pre;if(remaining<0){gameEnd();} pre=now;updateTime();},10);setButtonStateRunning();document.addEventListener("keydown",keydownCallback);next();} function gameEnd(){remaining=0;updateTime();clearInterval(timeoutId);timeoutId=null;document.removeEventListener("keydown",keydownCallback);result.textContent=`ミスタイプ： ${missTypecount},総タイプ： ${missTypecount+successTypecount}`;} let remaining=time;let timeoutId=null;let typed="";let untyped=nextStr();function setButtonStateInitial(){start.classList.remove("inactive");reset.classList.add("inactive");} function setButtonStateRunning(){start.classList.add("inactive");reset.classList.add("inactive");} function setButtonStateStopped(){start.classList.remove("inactive");reset.classList.remove("inactive");} setButtonStateInitial();start.addEventListener("click",()=>{if(timeoutId!==null){return;} gameStart();setButtonStateRunning();});reset.addEventListener("click",()=>{document.removeEventListener("keydown",keydownCallback);clearInterval(timeoutId);timeoutId=null;remaining=time;setButtonStateInitial();updateTime();next();missTypecount=0;successTypecount=0;result.textContent="";});